// app/gallery/page.tsx
import { getWatchTypes } from "@/services/data";
import { GalleryCard } from "@/components/shared/card/gallery";
import {
	Carousel,
	CarouselContent,
	CarouselItem,
	CarouselNext,
	CarouselPrevious,
} from "@/components/ui/carousel"; // Импортируем компоненты карусели

export default async function GalleryPage() {
	const watchTypes = await getWatchTypes();

	return (
		<>
			{/* --- МОБИЛЬНАЯ ВЕРСИЯ (КАРУСЕЛЬ) --- */}
			{/* Этот блок виден только на экранах меньше lg */}
			<div className="lg:hidden py-12">
				<div className="text-center px-4 mb-8">
					<h1 className="font-light text-5xl tracking-tighter text-black">
						Выберите основу
					</h1>
					<p className="mt-4 text-lg text-slate-600 max-w-2xl mx-auto">
						Каждая модель — это чистый холст для вашего воображения.
					</p>
				</div>

				{watchTypes.length > 0 ? (
					<Carousel
						opts={{
							align: "start",
							loop: true,
						}}
						className="w-full">
						<CarouselContent className="-ml-4">
							{watchTypes.map((model) => (
								<CarouselItem
									key={model.id}
									className="pl-4 basis-4/5 sm:basis-2/3">
									<GalleryCard model={model} />
								</CarouselItem>
							))}
						</CarouselContent>
						{/* Добавляем кастомные кнопки навигации */}
						<div className="absolute bottom-6 right-6 flex items-center gap-x-2">
							<CarouselPrevious className="static -translate-y-0 size-12 bg-white border-black" />
							<CarouselNext className="static -translate-y-0 size-12 bg-white border-black" />
						</div>
					</Carousel>
				) : (
					<p className="text-center text-slate-500 px-4">
						В данный момент нет доступных моделей для кастомизации.
					</p>
				)}
			</div>

			{/* --- ДЕСКТОПНАЯ ВЕРСИЯ (СЕТКА) --- */}
			{/* Этот блок виден только на экранах lg и больше */}
			<div className="hidden lg:grid grid-cols-2 xl:grid-cols-3 border-collapse">
				{/* Блок с заголовком */}
				<div className="p-12 xl:p-16 flex flex-col justify-center bg-black text-white">
					<h1 className="font-light text-6xl tracking-tighter">
						Выберите основу.
					</h1>
					<p className="mt-4 text-slate-300 max-w-xs">
						Каждая модель — это чистый холст для вашего воображения.
					</p>
				</div>

				{/* Карточки моделей */}
				{watchTypes.map((model) => (
					<GalleryCard key={model.id} model={model} />
				))}

				{/* Если моделей нет (для десктопа) */}
				{watchTypes.length === 0 && (
					<div className="p-12 lg:col-span-full flex items-center justify-center text-center text-slate-500">
						<p>В данный момент нет доступных моделей для кастомизации.</p>
					</div>
				)}
			</div>
		</>
	);
}

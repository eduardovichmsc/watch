// src/components/gallery/model-card.tsx
"use client";

import Image from "next/image";
import Link from "next/link";
import { Settings } from "lucide-react";
import { PATHS } from "@/constants/paths";
import type { WatchType } from "@/types";
import { useCursorStore } from "@/stores/cursor";

interface GalleryCardProps {
	model: WatchType;
}

export const GalleryCard = ({ model }: GalleryCardProps) => {
	const { setVariant } = useCursorStore();
	const configuratorLink = `${PATHS.CONFIGURATOR}?model=${model.id}`;

	return (
		<Link
			href={configuratorLink}
			className="group flex flex-col border border-slate-200 hover:border-black transition-colors"
			onMouseEnter={() => setVariant("link")}
			onMouseLeave={() => setVariant("default")}>
			{/* Контейнер для изображения */}
			<div className="overflow-hidden bg-slate-50 aspect-square">
				{model.image ? (
					<Image
						src={model.image}
						alt={model.name}
						width={600}
						height={600}
						className="w-full h-full object-cover transition-transform duration-500 ease-in-out group-hover:scale-105"
					/>
				) : (
					<div className="w-full h-full flex items-center justify-center text-slate-400">
						No Image
					</div>
				)}
			</div>

			{/* Информационный блок под изображением */}
			<div className="flex-grow flex flex-col p-6 bg-white">
				<div className="flex-grow">
					<h3 className="text-2xl font-medium tracking-tight text-black">
						{model.name}
					</h3>
					<p className="mt-1 font-mono text-xs uppercase text-slate-400">
						Начать с
					</p>
					<p className="text-lg font-medium text-black">
						{model.price
							? parseFloat(model.price).toLocaleString("ru-RU") + " KZT"
							: "Цена по запросу"}
					</p>
				</div>

				{/* Кнопка внизу карточки */}
				<div className="mt-6 flex items-center gap-x-2 text-sm font-semibold uppercase tracking-wider text-slate-500 transition-colors group-hover:text-black">
					<Settings
						size={16}
						className="transition-transform duration-300 group-hover:rotate-45"
					/>
					<span>Кастомизировать</span>
				</div>
			</div>
		</Link>
	);
};
